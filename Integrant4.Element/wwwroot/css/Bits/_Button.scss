%_ButtonBase {

}

button.I4E-Bit-Button, a.I4E-Bit-Button {
    align-items: center;
    border: 1px solid transparent;
    border-radius: calc(4 * (1em / var(--I4E-Base-Scale)));
    box-sizing: border-box;
    display: inline-flex;
    font-size: 1rem;
    font-weight: 600;
    padding: 0;
    text-decoration: none;
    transition: background-color 75ms ease-in, border 75ms ease-in;
    user-select: none;

    &:hover {
        transition: none;
    }

    @at-root a {
        outline: none;

        &:hover {
            text-decoration: underline;
        }
    }

    &:not(.I4E-Bit--Disabled) {
        cursor: pointer;
        transition: none;

        &:hover {
            background-color: var(--I4C-Main-Opaque-White-3);
        }

        &:active {
            background-color: var(--I4C-Main-Opaque-White-2);
        }
    }

    &.I4E-Bit--Disabled {
        cursor: not-allowed;
    }

    > div.I4E-Bit-Button-Contents {
        align-items: center;
        display: flex;
        width: 100%;

        > span.I4E-Bit-Button-Content {
            display: inline-flex;

            &:not(:last-child) {
                margin-right: calc(5 * (1em / var(--I4E-Base-Scale)));
            }

            &:only-child {
                flex-grow: 1;
            }
        }
    }

    //

    &:not(.I4E-Bit-Button--Small) {
        padding-bottom: calc(6 * (1em / var(--I4E-Base-Scale)));
        padding-top: calc(6 * (1em / var(--I4E-Base-Scale)));

        &:not(.I4E-Bit-Button--IconLeft) {
            padding-left: calc(10 * (1em / var(--I4E-Base-Scale)));
        }

        &.I4E-Bit-Button--IconLeft {
            padding-left: calc(5 * (1em / var(--I4E-Base-Scale)));
        }

        &:not(.I4E-Bit-Button--IconRight) {
            padding-right: calc(10 * (1em / var(--I4E-Base-Scale)));
        }

        &.I4E-Bit-Button--IconRight {
            padding-right: calc(5 * (1em / var(--I4E-Base-Scale)));
        }
    }

    &.I4E-Bit-Button--Small {
        padding-bottom: calc(2.5 * (1em / var(--I4E-Base-Scale)));
        padding-top: calc(2.5 * (1em / var(--I4E-Base-Scale)));

        &:not(.I4E-Bit-Button--IconLeft) {
            padding-left: calc(6 * (1em / var(--I4E-Base-Scale)));
        }

        &.I4E-Bit-Button--IconLeft {
            padding-left: calc(3 * (1em / var(--I4E-Base-Scale)));
        }

        &:not(.I4E-Bit-Button--IconRight) {
            padding-right: calc(6 * (1em / var(--I4E-Base-Scale)));
        }

        &.I4E-Bit-Button--IconRight {
            padding-right: calc(3 * (1em / var(--I4E-Base-Scale)));
        }
    }

    //

    &:focus {
        outline: none;
    }

    &:focus-visible {
        box-shadow: 0 0 1px 0 var(--I4C-Main-Accent-5);
    }

    // Default colors

    &.I4E-Bit-Button--Default {
        &.I4E-Bit--Disabled {
            opacity: 0.5;
        }
    }

    &.I4E-Bit-Button--Accent {
        background-color: var(--I4C-Main-Accent-5);
        color: var(--I4C-Main-Accent-6-Text);

        &:visited {
            color: var(--I4C-Main-Accent-6-Text);
        }

        &:hover:not(.I4E-Bit--Disabled) {
            background-color: var(--I4C-Main-Accent-4);
        }

        &:active:not(.I4E-Bit--Disabled) {
            background-color: var(--I4C-Main-Accent-3);
        }

        &.I4E-Bit--Disabled {
            opacity: 0.5;
        }
    }

    &.I4E-Bit-Button--Transparent {
        background-color: transparent;
        color: var(--I4C-Main-PageText);

        &:visited {
            color: var(--I4C-Main-PageText);
        }

        &.I4E-Bit--Disabled {
            opacity: 0.5;
        }
    }

    &.I4E-Bit-Button--AccentTransparent {
        background-color: transparent;
        color: var(--I4C-Main-PageText);

        &:visited {
            color: var(--I4C-Main-PageText);
        }

        &.I4E-Bit--Disabled {
            opacity: 0.5;
        }
    }
}

// Variable colors

div.I4-App {
    &[data-i4-theme-variant="Dark"], &[data-i4-theme-variant="Matrix"] {
        button.I4E-Bit-Button, a.I4E-Bit-Button {
            &.I4E-Bit-Button--Default {
                background-color: var(--I4C-Main-Opaque-White-2);
                box-shadow: var(--I4C-Main-Shadow-0);
                color: var(--I4C-Main-Text-6);

                &:visited {
                    color: var(--I4C-Main-Text-6);
                }

                &:hover:not(.I4E-Bit--Disabled) {
                    background-color: var(--I4C-Main-Opaque-White-3);
                    color: var(--I4C-Main-Text-6);
                }

                &:active:not(.I4E-Bit--Disabled) {
                    background-color: var(--I4C-Main-Opaque-White-2);
                    color: var(--I4C-Main-Text-6);
                }
            }

            &.I4E-Bit-Button--Transparent {
                &:hover:not(.I4E-Bit--Disabled) {
                    background-color: var(--I4C-Main-Opaque-White-3);
                    color: var(--I4C-Main-Accent-8);
                }

                &:active:not(.I4E-Bit--Disabled) {
                    background-color: var(--I4C-Main-Opaque-White-2);
                    color: var(--I4C-Main-Accent-8);
                }
            }

            &.I4E-Bit-Button--AccentTransparent {
                color: var(--I4C-Main-Accent-7);

                &:hover:not(.I4E-Bit--Disabled) {
                    background-color: var(--I4C-Main-Opaque-White-3);
                    color: var(--I4C-Main-Accent-8);
                }

                &:active:not(.I4E-Bit--Disabled) {
                    background-color: var(--I4C-Main-Opaque-White-2);
                    color: var(--I4C-Main-Accent-8);
                }
            }
        }
    }

    &[data-i4-theme-variant="Pink"], &[data-i4-theme-variant="White"] {
        button.I4E-Bit-Button, a.I4E-Bit-Button {
            &.I4E-Bit-Button--Default {
                background-color: var(--I4C-Main-Opaque-Black-2);
                color: var(--I4C-Main-Text-6);

                &:visited {
                    color: var(--I4C-Main-Text-6);
                }

                &:hover:not(.I4E-Bit--Disabled) {
                    background-color: var(--I4C-Main-Opaque-Black-3);
                    color: var(--I4C-Main-Text-6);
                }

                &:active:not(.I4E-Bit--Disabled) {
                    background-color: var(--I4C-Main-Opaque-Black-2);
                    color: var(--I4C-Main-Text-6);
                }
            }

            &.I4E-Bit-Button--Transparent {
                &:hover:not(.I4E-Bit--Disabled) {
                    background-color: var(--I4C-Main-Opaque-Black-1);
                    color: var(--I4C-Main-Accent-6);
                }

                &:active:not(.I4E-Bit--Disabled) {
                    background-color: var(--I4C-Main-Opaque-Black-0);
                    color: var(--I4C-Main-Accent-6);
                }
            }

            &.I4E-Bit-Button--AccentTransparent {
                color: var(--I4C-Main-Accent-5);

                &:hover:not(.I4E-Bit--Disabled) {
                    background-color: var(--I4C-Main-Opaque-Black-1);
                    color: var(--I4C-Main-Accent-6);
                }

                &:active:not(.I4E-Bit--Disabled) {
                    background-color: var(--I4C-Main-Opaque-Black-0);
                    color: var(--I4C-Main-Accent-6);
                }
            }
        }
    }
}

//

@mixin _ColorButton(
    $normalBackground, $normalBorder, $normalColor, 
    $focusBackground, $focusBorder, $focusColor, 
    $activeBackground, $activeBorder, $activeColor,
    $disabledBackground, $disabledBorder, $disabledColor,
) {
    &:not(.I4E-Bit--Disabled):not(:disabled) {
        background-color: $normalBackground;
        box-shadow: var(--I4C-Main-Shadow-0);
        border: 1px solid $normalBorder;
        color: $normalColor;

        &:visited {
            color: $normalColor;
        }

        &:hover, &:focus {
            background-color: $focusBackground;
            border: 1px solid $focusBorder;
            color: $focusColor;
        }

        &:active {
            background-color: $activeBackground;
            border: 1px solid $activeBorder;
            color: $activeColor;
        }
    }

    &.I4E-Bit--Disabled, &:disabled {
        background-color: $disabledBackground;
        border: 1px solid $disabledBorder;
        color: $disabledColor;
    }
}

button.I4E-Bit-Button--Blue, a.I4E-Bit-Button--Blue {
    @include _ColorButton(
                    var(--I4C-Solids-Blue-6),
                    var(--I4C-Solids-Blue-6),
                    white,
                //
                    var(--I4C-Solids-Blue-8),
                    var(--I4C-Solids-Blue-8),
                    white,
                //
                    var(--I4C-Solids-Blue-10),
                    var(--I4C-Solids-Blue-0),
                    white,
                //
                    transparent,
                    var(--I4C-Main-Border-4),
                    var(--I4C-Main-Text-0)
    );
}

button.I4E-Bit-Button--Green, a.I4E-Bit-Button--Green {
    @include _ColorButton(
                    var(--I4C-Solids-Green-9),
                    var(--I4C-Solids-Green-9),
                    white,
                //
                    var(--I4C-Solids-Green-7),
                    var(--I4C-Solids-Green-7),
                    white,
                //
                    var(--I4C-Solids-Green-5),
                    var(--I4C-Solids-Green-4),
                    white,
                //
                    transparent,
                    var(--I4C-Main-Border-4),
                    var(--I4C-Main-Text-0)
    );
}

button.I4E-Bit-Button--Orange, a.I4E-Bit-Button--Orange {
    @include _ColorButton(
                    var(--I4C-Solids-Orange-7),
                    var(--I4C-Solids-Orange-7),
                    white,
                //
                    var(--I4C-Solids-Orange-5),
                    var(--I4C-Solids-Orange-5),
                    white,
                //
                    var(--I4C-Solids-Orange-4),
                    var(--I4C-Solids-Orange-3),
                    white,
                //
                    transparent,
                    var(--I4C-Main-Border-4),
                    var(--I4C-Main-Text-0)
    );
}

button.I4E-Bit-Button--Purple, a.I4E-Bit-Button--Purple {
    @include _ColorButton(
                    var(--I4C-Solids-Purple-9),
                    var(--I4C-Solids-Purple-9),
                    white,
                //
                    var(--I4C-Solids-Purple-7),
                    var(--I4C-Solids-Purple-7),
                    white,
                //
                    var(--I4C-Solids-Purple-5),
                    var(--I4C-Solids-Purple-4),
                    white,
                //
                    transparent,
                    var(--I4C-Main-Border-4),
                    var(--I4C-Main-Text-0)
    );
}

button.I4E-Bit-Button--Red, a.I4E-Bit-Button--Red {
    @include _ColorButton(
                    var(--I4C-Solids-Red-9),
                    var(--I4C-Solids-Red-9),
                    white,
                //
                    var(--I4C-Solids-Red-7),
                    var(--I4C-Solids-Red-7),
                    white,
                //
                    var(--I4C-Solids-Red-5),
                    var(--I4C-Solids-Red-4),
                    white,
                //
                    transparent,
                    var(--I4C-Main-Border-4),
                    var(--I4C-Main-Text-0)
    );
}

button.I4E-Bit-Button--Yellow, a.I4E-Bit-Button--Yellow {
    @include _ColorButton(
                    var(--I4C-Solids-Yellow-6),
                    var(--I4C-Solids-Yellow-6),
                    black,
                //
                    var(--I4C-Solids-Yellow-5),
                    var(--I4C-Solids-Yellow-5),
                    black,
                //
                    var(--I4C-Solids-Yellow-3),
                    var(--I4C-Solids-Yellow-2),
                    black,
                //
                    transparent,
                    var(--I4C-Main-Border-4),
                    var(--I4C-Main-Text-0)
    );
}